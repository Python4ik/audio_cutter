# audio_cutter
Вот описание кода для `README.md`, которое объясняет его функциональность, структуру и использование:

---

# Классификация аудиофайлов по характеристикам

Этот скрипт анализирует аудиофайлы на основе их темпа (BPM), динамического диапазона и частотного спектра, затем классифицирует их в три категории: "танцевальная", "спокойная" и "среднего темпа". После анализа файлы перемещаются в соответствующие поддиректории.

## Основные возможности:
- Анализ BPM (темп) с использованием библиотеки `librosa`.
- Классификация треков на основе заданных пороговых значений.
- Автоматическое создание поддиректорий для каждой категории.
- Перемещение файлов в соответствующие категории после анализа.

---

## Требования

Для работы скрипта необходимо установить следующие зависимости:

```bash
pip install librosa numpy tqdm
```

Также требуется Python версии 3.6 или выше.

---

## Конфигурация

### Пороговые значения
1. **BPM_THRESHOLDS**: Словарь, определяющий диапазоны BPM для каждой категории:
   - `"dance"`: более 120 BPM.
   - `"calm"`: от 60 до 120 BPM.
   - `"medium"`: от 40 до 60 BPM.

   Пример конфигурации:

   ```python
   BPM_THRESHOLDS = {
       'dance': (120, float('inf')),      # Танцевальная: >120 BPM
       'calm': (60, 120),                  # Спокойная: 60-120 BPM
       'medium': (40, 60)                  # Среднего темпа: 40-60 BPM
   }
   ```

2. **DYNAMIC_RANGE_THRESHOLD**: Минимальный динамический диапазон для танцевальных треков. Если значение ниже этого порога, трек не будет классифицирован как "танцевальный".

   ```python
   DYNAMIC_RANGE_THRESHOLD = 0.8
   ```

---

## Как использовать

1. Разместите аудиофайлы в директории, которую вы хотите проанализировать.
2. Запустите скрипт:

```bash
python classify_audio.py
```

3. Введите путь к исходной директории с аудиофайлами, когда вас об этом попросят.
4. После выполнения скрипта, файлы будут перемещены в поддиректории с названиями категорий (`dance`, `calm`, `medium`).

---

## Структура проекта

- **classify_audio.py**: Главный файл скрипта.
- **BPM_THRESHOLDS**: Словарь для определения категорий треков.
- **DYNAMIC_RANGE_THRESHOLD**: Пороговое значение для динамического диапазона.

---

## Функции

### `analyze_track(file_path)`
Функция для анализа характеристик аудиофайла.

- **Параметры**:
  - `file_path`: Путь к аудиофайлу.

- **Возвращаемое значение**:
  - Словарь с характеристиками трека:
    - `bpm`: Темп трека (в ударах в минуту).
    - `dynamic_range`: Динамический диапазон трека.
    - `spectral_centroid`: Средний центр частоты спектра.

- **Логика работы**:
  1. Загружает аудиофайл с помощью `librosa`.
  2. Вычисляет BPM с помощью `librosa.beat.beat_track`.
  3. Вычисляет динамический диапазон на основе RMS (Root Mean Square) амплитуды.
  4. Вычисляет средний центр частоты спектра.

### `classify_track(track_data)`
Функция для классификации трека на основе его характеристик.

- **Параметры**:
  - `track_data`: Словарь с характеристиками трека (результат `analyze_track`).

- **Возвращаемое значение**:
  - Название категории (`'dance'`, `'calm'`, `'medium'`) или `'unknown'`, если трек не удовлетворяет никаким условиям.

- **Логика работы**:
  1. Проверяет BPM трека относительно заданных порогов.
  2. Для категории `'dance'` дополнительно проверяет динамический диапазон.

### `process_audio_files(base_dir)`
Функция для обработки всех аудиофайлов в указанной директории и её поддиректориях.

- **Параметры**:
  - `base_dir`: Путь к директории с аудиофайлами.

- **Логика работы**:
  1. Проходит по всем файлам в директории и её поддиректориях.
  2. Анализирует каждый файл с помощью `analyze_track`.
  3. Классифицирует файл с помощью `classify_track`.
  4. Создаёт поддиректорию для категории, если её нет.
  5. Перемещает файл в соответствующую поддиректорию.

---

## Пример логирования

При выполнении скрипта вы увидите сообщения в терминале о прогрессе:

```
Введите путь к исходной директории с аудиофайлами: /path/to/audio/files
Обработка директории /path/to/audio/files: 100%|██████████| 10/10 [00:05<00:00,  2.00it/s]
Файл track1.mp3 (125.34 BPM, Dynamic Range: 1.23, Spectral Centroid: 2500.45) перемещён в категорию 'dance'.
Файл track2.mp3 (75.67 BPM, Dynamic Range: 0.98, Spectral Centroid: 1800.34) перемещён в категорию 'calm'.
...
Обработка завершена.
```

---

## Возможные ошибки

Если возникают проблемы при обработке файла, они будут зафиксированы в терминале. Например:

```
Ошибка при обработке файла /path/to/audio/files/corrupted.mp3: [Error Message]
Не удалось проанализировать файл corrupted.mp3
```

---

## Расширение функциональности

Вы можете доработать скрипт, добавив следующие возможности:
- Поддержку дополнительных форматов аудиофайлов.
- Настройку пороговых значений через конфигурационный файл.
- Графический интерфейс для выбора файлов и параметров.
- Сохранение результатов анализа в CSV-файл.

---

Если у вас есть вопросы или предложения по улучшению скрипта, пожалуйста, свяжитесь с нами!
